<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Logic Grid Solver</title>

    <link rel="stylesheet" href="./index.css" />
    <script type="module" src="./index.ts" defer></script>
  </head>
  <body>
    <div class="title-outer">
      <span class="title">Logic grid solver in Islands of Insight!</span>
      <a class="link" onclick="document.getElementById('info-box').classList.remove('hidden')">[Info]</a>
      <a class="link" href="https://alaggydev.github.io/logic-grid-solver">[Github]</a>
    </div>

    <div id="info-box" class="hidden">
      <div id="info-close-button" onclick="document.getElementById('info-box').classList.add('hidden')">X</div>

      <div class="info-scollable">
        <h2>Info</h2>

        <p>
          This is a solver for solving logic grids in Islands of insight
          <strong>automatically in the browser</strong>!
        </p>

        <h3>Controls:</h3>
        <ol>
          <li>
            "Cell" mode - left click to place dark cell, right click to place light cell, middle click to clear cell.
          </li>
          <li>"Border" mode - left click to place border cell, right click to clear cell.</li>
          <li>"Symbol" mode - left click to place a symbol, right click to remove symbol.</li>
        </ol>

        <h3>
          Only a subset of the game's mechanics are currently implemented. More will be implemented in the future.
        </h3>

        <p>Implemented rules: Connected, Area</p>
        <p>Implemented symbols: Area, Dart, Viewpoint, Galaxy, Lotus</p>

        <h3>What is this?</h3>
        <p>
          This is a project to solve logic grids in Islands of Insight <strong>automatically by a computer</strong>. I
          created this project just for fun, and also to practice coding solvers (and see how far I can go). Obviously
          it is way more fun to solve logic grids yourself, but pushing the limits of solving puzzles automatically is
          also pretty fun.
        </p>

        <h3>How does this solve logic grids?</h3>
        <p>
          This solver uses a technique called backtracking. Essentially, the solver recursively guesses cells, and
          backtrack if the guesses are wrong. The process continues until a solution have been found. Some heuristics
          (e.g. Most Constrained Variable) are also implemented on certain rules & symbols to speed up the process.
        </p>

        <h3>Why is this website so ugly?</h3>
        <p>I did not try to make this website looks good.</p>

        <h3>Why are the input ui so bad?</h3>
        <p>:(</p>
      </div>
    </div>

    <div>
      <div>
        <label for="size-x">Board Size (X):</label>
        <input type="number" id="size-x" min="1" value="10" />

        <label for="size-y">Board Size (Y):</label>
        <input type="number" id="size-y" min="1" value="10" />

        <button id="reset-button">Reset Board</button>
      </div>

      <div>
        <button id="import-button">Import</button>

        <button id="export-button">Export</button>

        <select id="preset-select">
          <option value="none">Preset None</option>
          <option value="1">Preset 1</option>
          <option value="2">Preset 2</option>
          <option value="3">Preset 3</option>
          <option value="4">Preset 4</option>
          <option value="5">Preset 5</option>
          <option value="6">Preset 6</option>
          <option value="7">Preset 7</option>
          <option value="8">Preset 8 (TOO COMPLEX)</option>
        </select>
      </div>

      <div>
        <label>Mode: </label>

        <select id="item-select">
          <option value="cell">Cell</option>
          <option value="border">Border</option>
          <option value="area">Area</option>
          <option value="viewpoint">Viewpoint</option>
          <option value="galaxy">Galaxy</option>
          <option value="dart 0">Dart ↑</option>
          <option value="dart 1">Dart ↓</option>
          <option value="dart 2">Dart ←</option>
          <option value="dart 3">Dart →</option>
          <option value="lotus 0">Lotus ↕</option>
          <option value="lotus 1">Lotus ⤢</option>
          <option value="lotus 2">Lotus ↔</option>
          <option value="lotus 3">Lotus ⤡</option>
        </select>

        <label>Rule: </label>

        <select id="rule-select">
          <option value="connected dark">Connected (Dark)</option>
          <option value="connected light">Connected (Light)</option>
          <option value="area dark">Area (Dark)</option>
          <option value="area light">Area (Light)</option>
        </select>

        <button id="add-rule-button">Add Rule</button>
        <button id="clear-rules-button">Clear Rules</button>

        <button id="solve-button">Solve!</button>
      </div>

      <div id="bottom">
        <canvas id="board" width="600" height="600"></canvas>

        <ul id="rule-list"></ul>
      </div>
    </div>
  </body>
</html>
